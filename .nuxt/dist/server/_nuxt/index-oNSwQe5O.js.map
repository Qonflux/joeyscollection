{"version":3,"file":"index-oNSwQe5O.js","sources":["../../../../pages/admin/manage/index.vue"],"sourcesContent":["<template>\n  <div>\n    <input v-model=\"search\" type=\"text\" placeholder=\"Zoeken op naam...\" class=\"rounded-md p-2 text-black w-full mb-4\">\n\n    <table class=\"text-sm\">\n      <tr v-for=\"game, i in gamesArray\" :key=\"game._id\" :class=\"{'bg-gray-700': i % 2}\">\n        <td class=\"w-96\">\n          {{ game.name }}\n        </td>\n        <td class=\"w-80\">{{ game.platform }}</td>\n        <td class=\"w-32\">\n          <input type=\"checkbox\" :checked=\"game.completed\" @input=\"toggleCompleted(game)\">\n          <button @click=\"deleteGame(game._id)\">\n            <font-awesome-icon \n              icon=\"fa-solid fa-circle-xmark\" \n              class=\"w-4 h-4 text-red-500 ml-4 mb-0.5 cursor-pointer\"\n            />\n          </button>\n        </td>\n      </tr>\n    </table>\n  </div>\n</template>\n\n<script setup>\nconst config = useRuntimeConfig() \nconst { $showToast } = useNuxtApp()\n\n// Get and set games in store \nconst { data: games, refresh } = await useFetch(`${config.public.API_URL}/api/games`, { initialCache: false })\n\nconst search = ref('')\n\nconst gamesArray = computed(() => {\n  let filtered = games.value\n  if (search.value.length > 0) {\n    filtered = filtered.filter(game => game.name.toLowerCase().includes(search.value.toLowerCase()))\n  }\n  return filtered\n})\n\nconst toggleCompleted = async (game) => {\n  try {\n    await $fetch(`/api/games/${game._id}`, { method: 'PUT', body: { ...game, completed: !game.completed }})\n    $showToast('Game succesvol geÃ¼pdatet', 'info')\n    refresh()\n  } catch (err) {\n    console.error(err)\n  }\n}\n\nconst deleteGame = async (id) => {\n  try {\n    await $fetch(`/api/games/${id}`, { method: 'DELETE' })\n    $showToast('Game succesvol verwijderd', 'info')\n    refresh()\n  } catch (err) {\n    console.error(err)\n  }\n}\n</script>"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,UAAM,SAAS,iBAAkB;AAIjC,UAAM,EAAE,MAAM,OAAO,QAAS,KAAG,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAM,SAAS,GAAG,OAAO,OAAO,OAAO,cAAc,EAAE,cAAc,MAAK,GAAE,aAAA,CAAA;AAE7G,UAAM,SAAS,IAAI,EAAE;AAErB,UAAM,aAAa,SAAS,MAAM;AAChC,UAAI,WAAW,MAAM;AACrB,UAAI,OAAO,MAAM,SAAS,GAAG;AAC3B,mBAAW,SAAS,OAAO,UAAQ,KAAK,KAAK,YAAa,EAAC,SAAS,OAAO,MAAM,YAAa,CAAA,CAAC;AAAA,MAChG;AACD,aAAO;AAAA,IACT,CAAC;;;;;;;;;;;;;;;;;;;;;;"}